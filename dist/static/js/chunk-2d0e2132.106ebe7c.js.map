{"version":3,"sources":["webpack:///./src/views/stock/depot.vue?2f3f","webpack:///src/views/stock/depot.vue","webpack:///./src/views/stock/depot.vue?10b4","webpack:///./src/views/stock/depot.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","subtitle","filter","ref","dataType","searchDate","staticRenderFns","depotvue_type_script_lang_js_","name","components","viewHeader","stockSearch","stockTable","data","type","key","goods_name","delivery_type","options","brand_id","optLabel","optValue","goods_id","price","min_price","labelShow","max_price","completeTime","buttons","size","label","handle","search","reset","methods","query","map","row","v","priceList","online_stm","online_etm","Object","keys","forEach","routeQuery","objectSpread","page_size","$route","page","$router","replace","filterInit","_filterInit","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","brandList","_ref2","deliveryList","msg","_this","wrap","_context","prev","next","$axios","get","api","sent","item","brand","Number","t0","$message","error","stop","apply","arguments","mounted","beforeRouteEnter","to","from","vm","beforeRouteUpdate","$refs","goodsSkuList","stock_depotvue_type_script_lang_js_","component","componentNormalizer","__file","__webpack_exports__"],"mappings":"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","file":"static/js/chunk-2d0e2132.106ebe7c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sell\"},[_c('div',{staticClass:\"sell-header\"},[_c('view-header',{attrs:{\"title\":_vm.title,\"subtitle\":_vm.subtitle}})],1),_c('stock-search',{attrs:{\"filter\":_vm.filter}}),_c('stock-table',{ref:\"stockTable\",attrs:{\"dataType\":_vm.dataType,\"searchDate\":_vm.searchDate,\"title\":_vm.title}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n.sell\r\n  .sell-header\r\n    view-header(:title=\"title\", :subtitle=\"subtitle\")\r\n  stock-search(:filter=\"filter\")\r\n  stock-table(\r\n    :dataType=\"dataType\"\r\n    :searchDate=\"searchDate\"\r\n    :title=\"title\"\r\n    ref=\"stockTable\"\r\n  )\r\n</template>\r\n\r\n<script>\r\nimport viewHeader from '@/components/viewHeader'\r\nimport stockSearch from '@/components/stockSearch'\r\nimport stockTable from '@/components/stockTable'\r\nimport { supplierBrand, deliveryType } from 'api'\r\nexport default {\r\n  name: 'sales',\r\n  components: {\r\n    viewHeader,\r\n    stockSearch,\r\n    stockTable\r\n  },\r\n  data () {\r\n    return {\r\n      title: '仓库中的商品',\r\n      subtitle: '仓库中的商品管理',\r\n      dataType: 'off',\r\n      filter: [\r\n        [\r\n          { name: '商品名：', type: 'default', key: 'goods_name', goods_name: '' },\r\n          { name: '交货期：', type: 'select', key: 'delivery_type', delivery_type: '', options: [] },\r\n          { name: '品牌：', type: 'select', key: 'brand_id', brand_id: '', optLabel: 'name', optValue: 'id', options: [] }\r\n        ],\r\n        [\r\n          { name: '商品编号：', type: 'default', key: 'goods_id', goods_id: '' },\r\n          { name: '价格：', type: 'double', key: 'price', price: [ { key: 'min_price', min_price: '', labelShow: true }, { key: 'max_price', max_price: '', labelShow: false } ] }\r\n        ],\r\n        [\r\n          { name: '上架时间：', type: 'date', key: 'completeTime', completeTime: [] },\r\n          {\r\n            type: 'handle',\r\n            buttons: [\r\n              { name: 'search', size: 'small', label: '搜索', handle: this.search },\r\n              { name: 'reset', size: 'small', label: '重置', handle: this.reset }\r\n            ]\r\n          }\r\n        ]\r\n      ],\r\n      searchDate: {}\r\n    }\r\n  },\r\n  methods: {\r\n    search () {\r\n      let query = {}\r\n      this.filter.map(row => row.map(v => {\r\n        if (v.key === 'completeTime' && !v[v.key]) query[v.key] = []\r\n        if (v[v.key]) query[v.key] = v[v.key]\r\n        if (v[v.key] === '全部') delete query[v.key]\r\n        if (v.key === 'price') {\r\n          let priceList = v[v.key]\r\n          priceList.map(price => {\r\n            query[price.key] = price[price.key]\r\n          })\r\n          delete query[v.key]\r\n        }\r\n        if (v.key === 'completeTime') {\r\n          query.online_stm = query[v.key][0]\r\n          query.online_etm = query[v.key][1]\r\n          delete query[v.key]\r\n        }\r\n      }))\r\n      Object.keys(query).forEach(v => {\r\n        if (!query[v]) {\r\n          delete query[v]\r\n        }\r\n      })\r\n      this.searchDate = query\r\n      let routeQuery = {\r\n        page_size: this.$route.query.page_size,\r\n        page: this.$route.query.page,\r\n        ...this.searchDate\r\n      }\r\n      this.$router.replace({ name: this.$route.name, query: { ...routeQuery } })\r\n    },\r\n    reset () {\r\n      this.filter.map(row => row.map(v => {\r\n        if (v.type === 'select') {\r\n          v[v.key] = '全部'\r\n        } else if (v.key === 'price') {\r\n          v[v.key] = [ { key: 'min_price', min_price: '', labelShow: true }, { key: 'max_price', max_price: '', labelShow: false } ]\r\n        } else if (v.key === 'completeTime') {\r\n          v[v.key] = []\r\n        } else {\r\n          v[v.key] = ''\r\n        }\r\n      }))\r\n      this.searchDate = {}\r\n      let routeQuery = {\r\n        page_size: this.$route.query.page_size + '',\r\n        page: this.$route.query.page + '',\r\n        ...this.searchDate\r\n      }\r\n      this.$router.replace({ name: this.$route.name, query: { ...routeQuery } })\r\n    },\r\n    async filterInit () {\r\n      try {\r\n        const { data: brandList } = await this.$axios.get(supplierBrand)\r\n        const { data: deliveryList } = await this.$axios.get(deliveryType)\r\n        this.filter.forEach(row => row.forEach(item => {\r\n          if (item.key === 'delivery_type') item.options = deliveryList.delivery_type\r\n          if (item.key === 'brand_id') item.options = brandList.brand\r\n          if (item.key === 'price') {\r\n            let priceList = item[item.key]\r\n            priceList.map(price => {\r\n              priceList[price.key] = this.$route.query[price.key] || ''\r\n            })\r\n          } else if (item.key === 'completeTime') {\r\n            item[item.key] = [ this.$route.query['online_stm'] || '', this.$route.query['online_etm'] || '' ]\r\n          } else {\r\n            if (item.key === 'brand_id') item[item.key] = Number(this.$route.query[item.key]) || ''\r\n            else item[item.key] = this.$route.query[item.key] || ''\r\n          }\r\n        }))\r\n      } catch ({ msg }) {\r\n        this.$message.error(msg)\r\n      }\r\n    }\r\n  },\r\n  mounted () {},\r\n  beforeRouteEnter (to, from, next) {\r\n    next(vm => {\r\n      vm.filterInit()\r\n    })\r\n  },\r\n  beforeRouteUpdate (to, from, next) {\r\n    next()\r\n    this.$refs.stockTable.goodsSkuList()\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./depot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./depot.vue?vue&type=template&id=2197f0b8&lang=pug&\"\nimport script from \"./depot.vue?vue&type=script&lang=js&\"\nexport * from \"./depot.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"depot.vue\"\nexport default component.exports"],"sourceRoot":""}